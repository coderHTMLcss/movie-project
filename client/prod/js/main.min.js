!function i(n,a,r){function o(t,e){if(!a[t]){if(!n[t]){var s="function"==typeof require&&require;if(!e&&s)return s(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}s=a[t]={exports:{}},n[t][0].call(s.exports,function(e){return o(n[t][1][e]||e)},s,s.exports,i,n,a,r)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<r.length;e++)o(r[e]);return o}({1:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var h=n(e("../../utils/CreateElement")),a=n(e("../../utils/LocalStorage")),i=e("../../utils/helpers");function n(e){return e&&e.__esModule?e:{default:e}}s.default=class{constructor(e,t){this.parent=t,this.moviesList=e}render(){this.moviesList.forEach(e=>{var{id:t,title:s,year:i,images:n,genre:a}=e,t=new h.default("li",{className:"movie__item active",dataset:{id:t}}).render(),r=new h.default("div",{className:"movie-like"}).render(),o=new h.default("figure",{className:"movie-like__svg"}).render(),o=(o.innerHTML=`<svg class="svg-empty active" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M13.2385 3.62081C12.9358 3.31799 12.5765 3.07778 12.1809 2.91389C11.7854 2.75 11.3615 2.66565 10.9333 2.66565C10.5052 2.66565 10.0812 2.75 9.68571 2.91389C9.29018 3.07778 8.93082 3.31799 8.62815 3.62081L8 4.24895L7.37185 3.62081C6.76048 3.00943 5.93128 2.66597 5.06666 2.66597C4.20205 2.66597 3.37285 3.00943 2.76148 3.62081C2.15011 4.23218 1.80664 5.06138 1.80664 5.92599C1.80664 6.7906 2.15011 7.6198 2.76148 8.23118L3.38963 8.85932L8 13.4697L12.6104 8.85932L13.2385 8.23118C13.5413 7.92851 13.7815 7.56914 13.9454 7.17361C14.1093 6.77808 14.1937 6.35413 14.1937 5.92599C14.1937 5.49785 14.1093 5.0739 13.9454 4.67837C13.7815 4.28284 13.5413 3.92348 13.2385 3.62081V3.62081Z" stroke="#6100C2" stroke-width="1.18519" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          <svg class="svg-full" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M13.2385 3.62081C12.9358 3.31799 12.5765 3.07778 12.1809 2.91389C11.7854 2.75 11.3615 2.66565 10.9333 2.66565C10.5052 2.66565 10.0812 2.75 9.68571 2.91389C9.29018 3.07778 8.93082 3.31799 8.62815 3.62081L8 4.24895L7.37185 3.62081C6.76048 3.00943 5.93128 2.66597 5.06666 2.66597C4.20205 2.66597 3.37285 3.00943 2.76148 3.62081C2.15011 4.23218 1.80664 5.06138 1.80664 5.92599C1.80664 6.7906 2.15011 7.6198 2.76148 8.23118L3.38963 8.85932L8 13.4697L12.6104 8.85932L13.2385 8.23118C13.5413 7.92851 13.7815 7.56914 13.9454 7.17361C14.1093 6.77808 14.1937 6.35413 14.1937 5.92599C14.1937 5.49785 14.1093 5.0739 13.9454 4.67837C13.7815 4.28284 13.5413 3.92348 13.2385 3.62081Z" fill="#6100C2" stroke="#6100C2" stroke-width="1.18519" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          `,r.append(o),new h.default("picture",{className:"movie__img-container"}).render()),n=new h.default("img",{className:"movie__img",src:n}).render(),n=(o.append(n),new h.default("div",{className:"movie__bottom"}).render()),s=new h.default("h4",{className:"movie__title",textContent:s}).render(),i=new h.default("p",{className:"movie__description",textContent:i}).render(),a=new h.default("span",{textContent:" | "+a}).render();i.append(a),n.append(s,i),t.append(o,n,r),this.parent.append(t),r.addEventListener("click",this.toggleSVG.bind(this,e))}),(0,i.changeContent)()}renderFullCard(e,t){var{id:e,title:s,year:i,images:n,genre:a,description:r,rating:o,runtime:l}=e,e=new h.default("li",{className:"movie-card__item",dataset:{id:e}}).render(),n=new h.default("img",{className:"movie-card__img",src:n}).render(),d=new h.default("div",{className:"movie-card__container"}).render(),c=new h.default("div",{className:"movie-card__title-container"}).render(),s=new h.default("h3",{className:"movie-card__title",textContent:s}).render(),u=new h.default("div",{className:"movie-card__svg-container"}).render(),m=new h.default("svg",{className:"movie-card__svg"}).render(),o=(m.innerHTML=`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="#FFC01E"/>
    </svg>
    `,new h.default("span",{className:"movie-card__rating",textContent:o+"/10"}).render()),m=(u.append(m,o),c.append(s,u),new h.default("div",{className:"movie-card__info"}).render()),o=new h.default("span",{className:"movie-card__year",textContent:i}).render(),s=new h.default("span",{className:"movie-card__genre",textContent:a}).render(),u=new h.default("span",{className:"movie-card__time",textContent:l}).render(),i=(m.append(o,s,u),new h.default("p",{className:"movie-card__description",textContent:r}).render()),a=new h.default("div",{className:"movie-card__buttons"}).render(),l=new h.default("button",{className:"button button__primary",textContent:"Watch now"}).render(),o=new h.default("button",{className:"button button__secondary"}).render();o.innerHTML=`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g filter="url(#filter0_b_204_397)">
      <rect x="1" y="1" width="54" height="54" rx="14" fill="url(#paint0_linear_204_397)"/>
      <rect x="0.5" y="0.5" width="55" height="55" rx="14.5" stroke="url(#paint1_linear_204_397)"/>
      <path d="M36.84 20.61C36.3292 20.099 35.7228 19.6936 35.0554 19.4171C34.3879 19.1405 33.6725 18.9982 32.95 18.9982C32.2275 18.9982 31.5121 19.1405 30.8446 19.4171C30.1772 19.6936 29.5708 20.099 29.06 20.61L28 21.67L26.94 20.61C25.9083 19.5783 24.509 18.9987 23.05 18.9987C21.591 18.9987 20.1917 19.5783 19.16 20.61C18.1283 21.6417 17.5487 23.041 17.5487 24.5C17.5487 25.959 18.1283 27.3583 19.16 28.39L20.22 29.45L28 37.23L35.78 29.45L36.84 28.39C37.351 27.8792 37.7563 27.2728 38.0329 26.6053C38.3095 25.9379 38.4518 25.2225 38.4518 24.5C38.4518 23.7775 38.3095 23.0621 38.0329 22.3946C37.7563 21.7272 37.351 21.1208 36.84 20.61V20.61Z" stroke="#6100C2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </g>
      <defs>
      <filter id="filter0_b_204_397" x="-20" y="-20" width="96" height="96" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
      <feFlood flood-opacity="0" result="BackgroundImageFix"/>
      <feGaussianBlur in="BackgroundImageFix" stdDeviation="10"/>
      <feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_204_397"/>
      <feBlend mode="normal" in="SourceGraphic" in2="effect1_backgroundBlur_204_397" result="shape"/>
      </filter>
      <linearGradient id="paint0_linear_204_397" x1="4.5" y1="-8.00001" x2="147.569" y2="14.2874" gradientUnits="userSpaceOnUse">
      <stop stop-color="white"/>
      <stop offset="1" stop-color="white" stop-opacity="0"/>
      </linearGradient>
      <linearGradient id="paint1_linear_204_397" x1="52" y1="65.5" x2="-4" y2="-18" gradientUnits="userSpaceOnUse">
      <stop stop-color="white"/>
      <stop offset="1" stop-color="white" stop-opacity="0"/>
      </linearGradient>
      </defs>
      </svg>
      `,a.append(l,o),d.append(c,m,i,a),e.append(n,d),t.append(e)}toggleSVG(t,e){var s=new a.default,i=s.getMovie(),n=(i?(-1!==(n=i.findIndex(e=>e.id===t.id))?i.splice(n,1):i.push(t),s.putMovie(i)):s.putMovie([t]),e.currentTarget.querySelector(".svg-empty")),i=e.currentTarget.querySelector(".svg-full");n.classList.contains("active")?(n.classList.remove("active"),n.style.display="none",i.classList.add("active"),i.style.display="block"):(n.classList.add("active"),n.style.display="block",i.classList.remove("active"),i.style.display="none")}}},{"../../utils/CreateElement":11,"../../utils/LocalStorage":12,"../../utils/helpers":13}],2:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=n(e("../../utils/CreateElement.js")),i=e("../../constans/root.js"),l=n(e("../../utils/Api.js"));function n(e){return e&&e.__esModule?e:{default:e}}s.default=class{constructor(e){this.parent=e}renderFormLogin(e){const t=new o.default("form",{className:"form-login active",dataset:{body:"login"}}).render();t.addEventListener("submit",this.handleSubmit.bind(this,e)),i.FIELDS_DATA_LOGIN.forEach(e=>{e=new o.default("input",e);t.append(e.render())}),this.parent.append(t)}renderFormRegistr(e){const t=new o.default("form",{className:"form-register",dataset:{body:"register"}}).render();t.addEventListener("submit",this.handleSubmit.bind(this,e)),i.FIELDS_DATA_REGISTER.forEach(e=>{e=new o.default("input",e);t.append(e.render())}),this.parent.append(t)}async handleSubmit(e,t){t.preventDefault();const s={};t.currentTarget.querySelectorAll(".form-field").forEach(e=>{s[e.name]=e.value});var i=await new l.default("http://localhost:8080/api/auth/").postRequest(e,s);switch(e){case"signup":if("Такой email уже существует"===i.statusText){const a=new o.default("span",{className:"error-register",textContent:i.statusText+" !"}).render();document.querySelector(".form-register").insertAdjacentElement("afterbegin",a),setTimeout(()=>{a.remove()},1e3)}else"Thanks for registering."===i.statusText&&setTimeout(()=>{window.location.href="./home.html"},500);break;case"signin":if(i.message){const r=new o.default("span",{className:"error-login",textContent:i.message}).render();document.querySelector(".form-login").insertAdjacentElement("afterbegin",r),setTimeout(()=>{r.remove()},1e3)}else{var n={id:i.data._id,fullName:i.data.fullName};sessionStorage.setItem("userData",JSON.stringify(n)),setTimeout(()=>{window.location.href="./home.html"},500)}}}}},{"../../constans/root.js":8,"../../utils/Api.js":10,"../../utils/CreateElement.js":11}],3:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=(e=e("../Card/Card"))&&e.__esModule?e:{default:e};s.default=class{constructor(e,t,s){this.data=e,this.count=t,this.parentElem=s||document.querySelector(".movie__list--trendingPage"),this.start=0,this.end=this.count,this.isLoading=!1}render(){var e=this.data.slice(this.start,this.end);return new i.default(e,this.parentElem).render(),this.start=this.end,this.end+=this.count,e}scroll(){window.addEventListener("scroll",()=>{var{scrollY:e,innerHeight:t}=window,e=document.documentElement.scrollHeight-50<=e+t;const s=document.querySelector(".loader");e&&!this.isLoading&&(this.isLoading=!0,s.classList.remove("hidden"),setTimeout(()=>{this.render(),this.isLoading=!1,s.classList.add("hidden")},500))}),this.render()}}},{"../Card/Card":1}],4:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;(e=e("../Form/Form"))&&e.__esModule;s.default=class{render(e){const t=document.querySelector(".modal");e.addEventListener("click",()=>{t.classList.add("active"),document.querySelector(".modal").addEventListener("click",e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal-close"))&&t.classList.remove("active")})})}}},{"../Form/Form":2}],5:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;s.default=class{constructor(e){this.slideButtons=document.querySelectorAll(".slide-button"),this.slideCount=e||1,this.init()}initSlider(){this.slideButtons.forEach(s=>{s.addEventListener("click",()=>{this.imageItem=this.imageList.querySelector(".movie__item"),this.imageList=document.querySelector(".movie__list");var e="prev-slide"===s.id?-1:1;let t=0;t="prev-slide"===s.id?this.imageItem.clientWidth*e*this.slideCount-40*this.slideCount:this.imageItem.clientWidth*e*this.slideCount+40*this.slideCount,this.imageList.scrollBy({left:t,behavior:"smooth"})})})}handleSlideButtons(){this.maxScrollLeft=this.imageList.scrollWidth-this.imageList.clientWidth,this.slideButtons[0].style.display=this.imageList.scrollLeft<=0?"none":"block",this.slideButtons[1].style.display=this.imageList.scrollLeft>=this.maxScrollLeft?"none":"block"}init(){this.imageList=document.querySelector(".movie__list"),this.imageList.addEventListener("scroll",()=>{this.handleSlideButtons()}),this.imageList.children.length&&this.initSlider()}}},{}],6:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;s.default=class{constructor(e){this.toggleBtn=e}toggleTheme(){this.toggleBtn.addEventListener("click",()=>{this.toggleBtn.classList.toggle("off"),"dark"===localStorage.getItem("theme")?localStorage.removeItem("theme"):localStorage.setItem("theme","dark"),this.addDarkClass()})}addDarkClass(){var e=document.querySelector(".sidebar");"dark"===localStorage.getItem("theme")?(document.body.classList.add("dark"),e.classList.add("dark"),this.toggleBtn.classList.add("off")):(document.body.classList.remove("dark"),e.classList.remove("dark"),this.toggleBtn.classList.remove("off"))}}},{}],7:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;i(e("../Card/Card")),i(e("../../utils/Api"));function i(e){return e&&e.__esModule?e:{default:e}}s.default=class{constructor(e,t){this.buttonsWrapper=document.querySelector(e),this.content=document.querySelector(t).childNodes,this.toggleTabs(this.content)}toggleTabs(){this.buttonsWrapper?this.buttonsWrapper?.addEventListener("click",async t=>{console.log(t.target),[...this.buttonsWrapper.children].forEach(e=>{e.classList.remove("active")}),t.target.classList.add("active"),this.content.forEach(e=>{e.dataset.body===t.target.dataset.head?e.classList.add("active"):e.classList.remove("active")})}):console.log("I didn't find a class")}init(){this.toggleTabs()}}},{"../../utils/Api":10,"../Card/Card":1}],8:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.switchBody=s.MOVIE_ROOT=s.LOGIN_BTN=s.FIELDS_DATA_REGISTER=s.FIELDS_DATA_LOGIN=void 0;s.switchBody=document.getElementById("switch"),s.LOGIN_BTN=document.querySelector(".button__primary--login"),s.MOVIE_ROOT=document.querySelector(".movie__list"),s.FIELDS_DATA_LOGIN=[{className:"form-field",type:"text",name:"email",placeholder:"Email address",value:"",required:!0},{className:"form-field",type:"password",name:"password",placeholder:"Password",value:"",required:!0},{className:"form-btn",id:"login",type:"submit",name:"submit",value:"Login"}],s.FIELDS_DATA_REGISTER=[{className:"form-field",type:"text",name:"fullName",placeholder:"Enter your nickName",value:"",required:!0},{className:"form-field",type:"password",name:"password",placeholder:"Password",value:"",required:!0},{className:"form-field",type:"email",name:"email",placeholder:"Email address",value:"",required:!0},{className:"form-btn",id:"register",type:"submit",name:"submit",value:"Sign Up"}]},{}],9:[function(e,t,s){"use strict";var i=c(e("./components/Switch/Switch")),n=e("./constans/root"),a=c(e("./components/Modal/Modal")),r=c(e("./components/Form/Form")),o=c(e("./components/Tabs/Tabs")),l=c(e("./components/Slider/Slider")),d=e("./utils/helpers");function c(e){return e&&e.__esModule?e:{default:e}}e=document.querySelector(".tabs__modal-body");"/"===window.location.pathname&&(e&&((r=new r.default(e)).renderFormLogin("signin"),r.renderFormRegistr("signup")),n.LOGIN_BTN&&(new a.default).render(n.LOGIN_BTN),new o.default(".tabs__modal-head",".tabs__modal-body")),window.addEventListener("DOMContentLoaded",async()=>{var e=JSON.parse(sessionStorage.getItem("userData"));e&&(document.querySelector(".user").textContent=e.fullName),n.switchBody&&((e=new i.default(n.switchBody)).toggleTheme(),e.addDarkClass()),"/home.html"===window.location.pathname&&new l.default(3).initSlider(),(0,d.getAndRenderData)(),(0,d.showFullCard)()})},{"./components/Form/Form":2,"./components/Modal/Modal":4,"./components/Slider/Slider":5,"./components/Switch/Switch":6,"./components/Tabs/Tabs":7,"./constans/root":8,"./utils/helpers":13}],10:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;s.default=class{constructor(e){this.ROOT_URL=e}async getRequest(e){return(await fetch(this.ROOT_URL+e,{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}})).json()}async postRequest(e,t){t={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};return(await fetch(this.ROOT_URL+e,t)).json()}async putRequest(e,t){t={method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};return(await fetch(this.ROOT_URL+e,t)).json()}async patchRequest(e,t){t={method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};return(await fetch(this.ROOT_URL+e,t)).json()}async deleteRequest(e){return(await fetch(this.ROOT_URL+e,{method:"DELETE"})).json()}}},{}],11:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;s.default=class{constructor(e,t){this.tagName=e,this.params=t}render(){var e,t=document.createElement(this.tagName);for(e in this.params)if("dataset"===e)for(var s in this.params[e])t.dataset[s]=this.params[e][s];else t[e]=this.params[e];return t}}},{}],12:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;s.default=class{constructor(){this.keyName="movie"}getMovie(){return localStorage.getItem(this.keyName)?JSON.parse(localStorage.getItem(this.keyName)):[]}putMovie(e){localStorage.setItem(this.keyName,JSON.stringify(e))}}},{}],13:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.changeContent=function(){var e=document.querySelectorAll(".movie__item");"/home.html"===window.location.pathname&&e&&e.forEach(r=>{r.addEventListener("click",()=>{var e=r.querySelector(".movie__title").textContent,t=r.querySelector(".movie__description").textContent,s=r.querySelector(".movie__img").src,i=document.querySelector(".header"),n=document.querySelector(".header-content__title"),a=document.querySelector(".header-content__description");i.style.transition="background-image 1s ease",n.style.transition="all 1s ease",a.style.transition="all 1s ease",i.style.backgroundImage=`url(${s})`,n.textContent=e,a.textContent=t})})},s.getAndRenderData=async function(){var e=await l(),t=e.filter(e=>{e=e.trending;return e}),s=e.filter(e=>e.continue),i=document.querySelector(".movie__list--trending"),n=document.querySelector(".movie__list--continue"),a=document.querySelector(".movie__list--trendingPage");"/home.html"===window.location.pathname?(new r.default(t,i).render(),new o.default(s,4,n).scroll()):"/trending.html"===window.location.pathname&&new o.default(t,4,a).scroll();return e},s.showFullCard=async function(){if("/trending.html"===window.location.pathname){const s=(await l()).filter(e=>{e=e.trending;return e}),i=document.querySelector(".movie-card__list");document.querySelector(".movie__list--trendingPage").addEventListener("click",e=>{e=e.target.closest(".movie__item");if(e){const t=+e.dataset.id;e=s.find(e=>e.id===t);e&&(i.innerHTML="",new r.default(e,i).renderFullCard(e,i))}})}};var i=n(e("./Api")),r=n(e("../components/Card/Card")),o=n(e("../components/InfinityScroll/InfinityScroll"));function n(e){return e&&e.__esModule?e:{default:e}}const l=async()=>{return await new i.default("http://localhost:8080/api/").getRequest("movies")}},{"../components/Card/Card":1,"../components/InfinityScroll/InfinityScroll":3,"./Api":10}]},{},[9]);