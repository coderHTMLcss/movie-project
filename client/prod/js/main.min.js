!function i(a,r,n){function o(t,e){if(!r[t]){if(!a[t]){var s="function"==typeof require&&require;if(!e&&s)return s(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}s=r[t]={exports:{}},a[t][0].call(s.exports,function(e){return o(a[t][1][e]||e)},s,s.exports,i,a,r,n)}return r[t].exports}for(var l="function"==typeof require&&require,e=0;e<n.length;e++)o(n[e]);return o}({1:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=a(e("../../utils/CreateElement")),r=a(e("../../utils/LocalStorage")),i=e("../../utils/helpers");function a(e){return e&&e.__esModule?e:{default:e}}s.default=class{constructor(e,t){this.parent=t,this.moviesList=e}render(){this.moviesList.forEach(e=>{var{title:t,year:s,images:i,genre:a}=e,r=new l.default("li",{className:"movie__item"}).render(),n=new l.default("div",{className:"movie-like"}).render(),o=new l.default("figure",{className:"movie-like__svg"}).render(),o=(o.innerHTML=`<svg class="svg-empty active" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M13.2385 3.62081C12.9358 3.31799 12.5765 3.07778 12.1809 2.91389C11.7854 2.75 11.3615 2.66565 10.9333 2.66565C10.5052 2.66565 10.0812 2.75 9.68571 2.91389C9.29018 3.07778 8.93082 3.31799 8.62815 3.62081L8 4.24895L7.37185 3.62081C6.76048 3.00943 5.93128 2.66597 5.06666 2.66597C4.20205 2.66597 3.37285 3.00943 2.76148 3.62081C2.15011 4.23218 1.80664 5.06138 1.80664 5.92599C1.80664 6.7906 2.15011 7.6198 2.76148 8.23118L3.38963 8.85932L8 13.4697L12.6104 8.85932L13.2385 8.23118C13.5413 7.92851 13.7815 7.56914 13.9454 7.17361C14.1093 6.77808 14.1937 6.35413 14.1937 5.92599C14.1937 5.49785 14.1093 5.0739 13.9454 4.67837C13.7815 4.28284 13.5413 3.92348 13.2385 3.62081V3.62081Z" stroke="#6100C2" stroke-width="1.18519" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          <svg class="svg-full" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M13.2385 3.62081C12.9358 3.31799 12.5765 3.07778 12.1809 2.91389C11.7854 2.75 11.3615 2.66565 10.9333 2.66565C10.5052 2.66565 10.0812 2.75 9.68571 2.91389C9.29018 3.07778 8.93082 3.31799 8.62815 3.62081L8 4.24895L7.37185 3.62081C6.76048 3.00943 5.93128 2.66597 5.06666 2.66597C4.20205 2.66597 3.37285 3.00943 2.76148 3.62081C2.15011 4.23218 1.80664 5.06138 1.80664 5.92599C1.80664 6.7906 2.15011 7.6198 2.76148 8.23118L3.38963 8.85932L8 13.4697L12.6104 8.85932L13.2385 8.23118C13.5413 7.92851 13.7815 7.56914 13.9454 7.17361C14.1093 6.77808 14.1937 6.35413 14.1937 5.92599C14.1937 5.49785 14.1093 5.0739 13.9454 4.67837C13.7815 4.28284 13.5413 3.92348 13.2385 3.62081Z" fill="#6100C2" stroke="#6100C2" stroke-width="1.18519" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          `,n.append(o),new l.default("picture",{className:"movie__img-container"}).render()),i=new l.default("img",{className:"movie__img",src:i}).render(),i=(o.append(i),new l.default("div",{className:"movie__bottom"}).render()),t=new l.default("h4",{className:"movie__title",textContent:t}).render(),s=new l.default("p",{className:"movie__description",textContent:s}).render(),a=new l.default("span",{textContent:" | "+a}).render();s.append(a),i.append(t,s),r.append(o,i,n),this.parent.append(r),n.addEventListener("click",this.toggleSVG.bind(this,e))}),(0,i.changeContent)()}renderFullCard(){}toggleSVG(t,e){var s=new r.default,i=s.getMovie(),a=(i?(-1!==(a=i.findIndex(e=>e.id===t.id))?i.splice(a,1):i.push(t),s.putMovie(i)):s.putMovie([t]),e.currentTarget.querySelector(".svg-empty")),i=e.currentTarget.querySelector(".svg-full");a.classList.contains("active")?(a.classList.remove("active"),a.style.display="none",i.classList.add("active"),i.style.display="block"):(a.classList.add("active"),a.style.display="block",i.classList.remove("active"),i.style.display="none")}}},{"../../utils/CreateElement":11,"../../utils/LocalStorage":12,"../../utils/helpers":13}],2:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=a(e("../../utils/CreateElement.js")),i=e("../../constans/root.js"),l=a(e("../../utils/Api.js"));function a(e){return e&&e.__esModule?e:{default:e}}s.default=class{constructor(e){this.parent=e}renderFormLogin(e){const t=new o.default("form",{className:"form-login active",dataset:{body:"login"}}).render();t.addEventListener("submit",this.handleSubmit.bind(this,e)),i.FIELDS_DATA_LOGIN.forEach(e=>{e=new o.default("input",e);t.append(e.render())}),this.parent.append(t)}renderFormRegistr(e){const t=new o.default("form",{className:"form-register",dataset:{body:"register"}}).render();t.addEventListener("submit",this.handleSubmit.bind(this,e)),i.FIELDS_DATA_REGISTER.forEach(e=>{e=new o.default("input",e);t.append(e.render())}),this.parent.append(t)}async handleSubmit(e,t){t.preventDefault();const s={};t.currentTarget.querySelectorAll(".form-field").forEach(e=>{s[e.name]=e.value});var i=await new l.default("http://localhost:8080/api/auth/").postRequest(e,s);switch(e){case"signup":if("Такой email уже существует"===i.statusText){const r=new o.default("span",{className:"error-register",textContent:i.statusText+" !"}).render();document.querySelector(".form-register").insertAdjacentElement("afterbegin",r),setTimeout(()=>{r.remove()},1e3)}else"Thanks for registering."===i.statusText&&setTimeout(()=>{window.location.href="./home.html"},500);break;case"signin":if(i.message){const n=new o.default("span",{className:"error-login",textContent:i.message}).render();document.querySelector(".form-login").insertAdjacentElement("afterbegin",n),setTimeout(()=>{n.remove()},1e3)}else{var a={id:i.data._id,fullName:i.data.fullName};sessionStorage.setItem("userData",JSON.stringify(a)),setTimeout(()=>{window.location.href="./home.html"},500)}}}}},{"../../constans/root.js":8,"../../utils/Api.js":10,"../../utils/CreateElement.js":11}],3:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=(e=e("../Card/Card"))&&e.__esModule?e:{default:e};s.default=class{constructor(e,t,s){this.data=e,this.count=t,this.parentElem=s,this.start=0,this.end=this.count,this.isLoading=!1}render(){var e=this.data.slice(this.start,this.end);return new i.default(e,this.parentElem).render(),this.start=this.end,this.end+=this.count,e}scroll(){window.addEventListener("scroll",()=>{var{scrollY:e,innerHeight:t}=window,e=document.documentElement.scrollHeight-50<=e+t;const s=document.querySelector(".loader");e&&!this.isLoading&&(this.isLoading=!0,s.classList.remove("hidden"),setTimeout(()=>{this.render(),this.isLoading=!1,s.classList.add("hidden")},500))}),this.render()}}},{"../Card/Card":1}],4:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;(e=e("../Form/Form"))&&e.__esModule;s.default=class{render(e){const t=document.querySelector(".modal");e.addEventListener("click",()=>{t.classList.add("active"),document.querySelector(".modal").addEventListener("click",e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal-close"))&&t.classList.remove("active")})})}}},{"../Form/Form":2}],5:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;s.default=class{constructor(e){this.slideButtons=document.querySelectorAll(".slide-button"),this.slideCount=e||1,this.init()}initSlider(){this.slideButtons.forEach(s=>{s.addEventListener("click",()=>{this.imageItem=this.imageList.querySelector(".movie__item"),this.imageList=document.querySelector(".movie__list");var e="prev-slide"===s.id?-1:1;let t=0;t="prev-slide"===s.id?this.imageItem.clientWidth*e*this.slideCount-40*this.slideCount:this.imageItem.clientWidth*e*this.slideCount+40*this.slideCount,this.imageList.scrollBy({left:t,behavior:"smooth"})})})}handleSlideButtons(){this.maxScrollLeft=this.imageList.scrollWidth-this.imageList.clientWidth,this.slideButtons[0].style.display=this.imageList.scrollLeft<=0?"none":"block",this.slideButtons[1].style.display=this.imageList.scrollLeft>=this.maxScrollLeft?"none":"block"}init(){this.imageList=document.querySelector(".movie__list"),this.imageList.addEventListener("scroll",()=>{this.handleSlideButtons()}),this.imageList.children.length&&this.initSlider()}}},{}],6:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;s.default=class{constructor(e){this.toggleBtn=e}toggleTheme(){this.toggleBtn.addEventListener("click",()=>{this.toggleBtn.classList.toggle("off"),"dark"===localStorage.getItem("theme")?localStorage.removeItem("theme"):localStorage.setItem("theme","dark"),this.addDarkClass()})}addDarkClass(){var e=document.querySelector(".sidebar");"dark"===localStorage.getItem("theme")?(document.body.classList.add("dark"),e.classList.add("dark"),this.toggleBtn.classList.add("off")):(document.body.classList.remove("dark"),e.classList.remove("dark"),this.toggleBtn.classList.remove("off"))}}},{}],7:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;s.default=class{constructor(e,t){this.buttonsWrapper=document.querySelector(e),this.content=document.querySelector(t).childNodes,this.toggleTabs()}toggleTabs(){this.buttonsWrapper?this.buttonsWrapper?.addEventListener("click",t=>{[...this.buttonsWrapper.children].forEach(e=>{e.classList.remove("active")}),t.target.classList.add("active"),this.content.forEach(e=>{e.dataset.body===t.target.dataset.head?e.classList.add("active"):e.classList.remove("active")})}):console.log("I didn't find a class")}init(){this.toggleTabs()}}},{}],8:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.switchBody=s.MOVIE_ROOT=s.LOGIN_BTN=s.FIELDS_DATA_REGISTER=s.FIELDS_DATA_LOGIN=void 0;s.switchBody=document.getElementById("switch"),s.LOGIN_BTN=document.querySelector(".button__primary--login"),s.MOVIE_ROOT=document.querySelector(".movie__list"),s.FIELDS_DATA_LOGIN=[{className:"form-field",type:"text",name:"email",placeholder:"Email address",value:"",required:!0},{className:"form-field",type:"password",name:"password",placeholder:"Password",value:"",required:!0},{className:"form-btn",id:"login",type:"submit",name:"submit",value:"Login"}],s.FIELDS_DATA_REGISTER=[{className:"form-field",type:"text",name:"fullName",placeholder:"Enter your nickName",value:"",required:!0},{className:"form-field",type:"password",name:"password",placeholder:"Password",value:"",required:!0},{className:"form-field",type:"email",name:"email",placeholder:"Email address",value:"",required:!0},{className:"form-btn",id:"register",type:"submit",name:"submit",value:"Sign Up"}]},{}],9:[function(e,t,s){"use strict";var i=c(e("./components/Switch/Switch")),a=e("./constans/root"),r=c(e("./components/Modal/Modal")),n=c(e("./components/Form/Form")),o=c(e("./components/Tabs/Tabs")),l=c(e("./components/Slider/Slider")),d=e("./utils/helpers");function c(e){return e&&e.__esModule?e:{default:e}}e=document.querySelector(".tabs__modal-body");"/"===window.location.pathname&&(e&&((n=new n.default(e)).renderFormLogin("signin"),n.renderFormRegistr("signup")),a.LOGIN_BTN&&(new r.default).render(a.LOGIN_BTN),new o.default(".tabs__modal-head",".tabs__modal-body")),window.addEventListener("DOMContentLoaded",async()=>{var e=JSON.parse(sessionStorage.getItem("userData"));e&&(document.querySelector(".user").textContent=e.fullName),a.switchBody&&((e=new i.default(a.switchBody)).toggleTheme(),e.addDarkClass()),(0,d.getAndRenderData)(),"/home.html"===window.location.pathname&&new l.default(3).initSlider()})},{"./components/Form/Form":2,"./components/Modal/Modal":4,"./components/Slider/Slider":5,"./components/Switch/Switch":6,"./components/Tabs/Tabs":7,"./constans/root":8,"./utils/helpers":13}],10:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;s.default=class{constructor(e){this.ROOT_URL=e}async getRequest(e){return(await fetch(this.ROOT_URL+e,{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}})).json()}async postRequest(e,t){t={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};return(await fetch(this.ROOT_URL+e,t)).json()}async putRequest(e,t){t={method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};return(await fetch(this.ROOT_URL+e,t)).json()}async patchRequest(e,t){t={method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};return(await fetch(this.ROOT_URL+e,t)).json()}async deleteRequest(e){return(await fetch(this.ROOT_URL+e,{method:"DELETE"})).json()}}},{}],11:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;s.default=class{constructor(e,t){this.tagName=e,this.params=t}render(){var e,t=document.createElement(this.tagName);for(e in this.params)if("dataset"===e)for(var s in this.params[e])t.dataset[s]=this.params[e][s];else t[e]=this.params[e];return t}}},{}],12:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;s.default=class{constructor(){this.keyName="movie"}getMovie(){return localStorage.getItem(this.keyName)?JSON.parse(localStorage.getItem(this.keyName)):[]}putMovie(e){localStorage.setItem(this.keyName,JSON.stringify(e))}}},{}],13:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.changeContent=function(){var e=document.querySelectorAll(".movie__item");e&&e.forEach(n=>{n.addEventListener("click",()=>{var e=n.querySelector(".movie__title").textContent,t=n.querySelector(".movie__description").textContent,s=n.querySelector(".movie__img").src,i=document.querySelector(".header"),a=document.querySelector(".header-content__title"),r=document.querySelector(".header-content__description");i.style.transition="background-image 1s ease",a.style.transition="all 1s ease",r.style.transition="all 1s ease",i.style.backgroundImage=`url(${s})`,a.textContent=e,r.textContent=t})})},s.getAndRenderData=async function(){var e=new r.default("http://localhost:8080/api/"),e=await e.getRequest("movies"),t=document.querySelector(".movie__list--trending"),s=document.querySelector(".movie__list--continue"),i=e.filter(e=>{e=e.trending;return e}),a=e.filter(e=>e.continue),i=new n.default(i,t),t=(i.render(),new o.default(a,4,s));return t.scroll(),e};var r=i(e("./Api")),n=i(e("../components/Card/Card")),o=i(e("../components/InfinityScroll/InfinityScroll"));function i(e){return e&&e.__esModule?e:{default:e}}},{"../components/Card/Card":1,"../components/InfinityScroll/InfinityScroll":3,"./Api":10}]},{},[9]);